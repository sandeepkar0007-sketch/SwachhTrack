{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Analytics | EcoTracker</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;700&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<!-- ADD CHART.JS LIBRARY -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Montserrat',sans-serif;color:#eaffea;background:#000;overflow-x:hidden}
canvas{position:fixed;inset:0;z-index:-3}
.overlay{position:fixed;inset:0;background:radial-gradient(circle, rgba(0,0,0,0.35), rgba(0,0,0,0.85));z-index:-2}

.navbar{
  position:sticky;top:0;z-index:1000;padding:18px 60px;
  display:flex;justify-content:space-between;align-items:center;
  background:rgba(15,61,46,0.9);backdrop-filter:blur(12px);
}
.navbar h1{color:#eaffea;font-size:1.8rem}
.navbar nav a{
  margin-left:30px;text-decoration:none;color:#c8facc;
  font-weight:500;position:relative;
}
.navbar nav a::after{
  content:"";position:absolute;width:0;height:2px;
  bottom:-6px;left:0;background:#7ae582;transition:.3s;
}
.navbar nav a:hover::after{width:100%}
.navbar nav a.active{color:#7ae582}

/* Analytics Layout */
.analytics-container{
  max-width:1400px;margin:0 auto;padding:40px 20px;
}
.analytics-header{
  text-align:center;margin-bottom:50px;
}
.analytics-header h2{
  font-size:2.5rem;color:#7ae582;margin-bottom:15px;
}
.analytics-header p{
  font-size:1.1rem;color:#c8facc;max-width:800px;margin:0 auto;
}

/* Time Period Selector */
.time-period-selector{
  display:flex;justify-content:center;gap:10px;margin-bottom:40px;
}
.time-btn{
  padding:10px 25px;background:rgba(255,255,255,0.08);
  border:1px solid rgba(122,229,130,0.3);border-radius:25px;
  color:#c8facc;cursor:pointer;transition:.3s;
}
.time-btn:hover{background:rgba(122,229,130,0.1)}
.time-btn.active{
  background:#22c55e;color:#022c22;border-color:#22c55e;
  font-weight:600;
}

/* Stats Overview */
.stats-overview{
  display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));
  gap:25px;margin-bottom:50px;
}
.stat-card-large{
  background:rgba(255,255,255,0.08);border-radius:20px;
  padding:30px;backdrop-filter:blur(15px);
  border:1px solid rgba(122,229,130,0.1);
}
.stat-card-large .stat-value{
  font-size:3rem;font-weight:700;color:#7ae582;
  margin-bottom:10px;
}
.stat-card-large .stat-label{
  color:#c8facc;font-size:1rem;margin-bottom:15px;
}
.trend-indicator{
  display:inline-flex;align-items:center;gap:5px;
  padding:5px 12px;border-radius:15px;font-weight:600;
}
.trend-up{background:rgba(34,197,94,0.2);color:#22c55e}
.trend-down{background:rgba(220,53,69,0.2);color:#dc3545}

/* Charts Grid */
.charts-grid{
  display:grid;grid-template-columns:repeat(auto-fit, minmax(400px, 1fr));
  gap:30px;margin-bottom:50px;
}
.chart-container{
  background:rgba(255,255,255,0.08);border-radius:20px;
  padding:25px;backdrop-filter:blur(15px);
  border:1px solid rgba(122,229,130,0.1);
}
.chart-header{
  display:flex;justify-content:space-between;
  align-items:center;margin-bottom:20px;
}
.chart-header h3{color:#7ae582;font-size:1.3rem}
.chart-wrapper{height:250px;position:relative}

/* Insights Section */
.insights-section{
  background:rgba(255,255,255,0.08);border-radius:20px;
  padding:30px;margin-bottom:50px;backdrop-filter:blur(15px);
  border:1px solid rgba(122,229,130,0.1);
}
.insights-header{
  display:flex;justify-content:space-between;
  align-items:center;margin-bottom:25px;
}
.insights-header h3{color:#7ae582;font-size:1.5rem}
.insights-grid{
  display:grid;grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));
  gap:20px;
}
.insight-card{
  background:rgba(255,255,255,0.05);padding:20px;
  border-radius:15px;border-left:4px solid #22c55e;
}
.insight-card h4{color:#c8facc;margin-bottom:10px}
.insight-card p{color:#eaffea;font-size:0.95rem}

/* Leaderboard */
.leaderboard-section{
  background:rgba(255,255,255,0.08);border-radius:20px;
  padding:30px;margin-bottom:50px;backdrop-filter:blur(15px);
  border:1px solid rgba(122,229,130,0.1);
}
.leaderboard-header{
  display:flex;justify-content:space-between;
  align-items:center;margin-bottom:25px;
}
.leaderboard-header h3{color:#7ae582;font-size:1.5rem}
.leaderboard-table{
  width:100%;border-collapse:collapse;
}
.leaderboard-table th{
  text-align:left;padding:15px;color:#7ae582;
  border-bottom:2px solid rgba(122,229,130,0.3);
}
.leaderboard-table td{
  padding:15px;border-bottom:1px solid rgba(255,255,255,0.1);
}
.leaderboard-table tr:hover{
  background:rgba(122,229,130,0.05);
}
.rank-cell{width:60px;font-weight:700}
.rank-1{color:#ffd700}
.rank-2{color:#c0c0c0}
.rank-3{color:#cd7f32}
.points-cell{color:#7ae582;font-weight:600}

/* Comparison Cards */
.comparison-cards{
  display:grid;grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));
  gap:25px;margin-bottom:50px;
}
.comparison-card{
  background:rgba(255,255,255,0.08);border-radius:20px;
  padding:25px;backdrop-filter:blur(15px);
  border:1px solid rgba(122,229,130,0.1);
}
.comparison-card h3{color:#7ae582;margin-bottom:20px}
.comparison-item{
  display:flex;justify-content:space-between;
  padding:12px 0;border-bottom:1px solid rgba(255,255,255,0.1);
}
.comparison-label{color:#c8facc}
.comparison-value{color:#7ae582;font-weight:600}

/* Export Section */
.export-section{
  text-align:center;padding:40px;background:rgba(34,197,94,0.1);
  border-radius:20px;border:1px solid rgba(122,229,130,0.3);
}
.export-buttons{
  display:flex;justify-content:center;gap:20px;margin-top:25px;
}
.export-btn{
  padding:12px 30px;background:#22c55e;color:#022c22;
  border:none;border-radius:12px;font-weight:600;
  cursor:pointer;transition:.3s;display:flex;
  align-items:center;gap:10px;
}
.export-btn:hover{background:#16a34a;transform:translateY(-3px)}

/* Spline & Chatbot */
.spline-float{
  position:fixed;bottom:18px;right:18px;width:130px;height:130px;
  z-index:999;cursor:pointer;
}
.chatbot{
  position:fixed;bottom:210px;right:20px;width:280px;
  background:#fff;border-radius:18px;box-shadow:0 20px 50px rgba(0,0,0,.4);
  transform:scale(0);opacity:0;transition:.4s;z-index:998;
}
.chatbot.active{transform:scale(1);opacity:1}
.chat-header{
  background:#0f3d2e;color:#eaffea;padding:14px;
  display:flex;justify-content:space-between;
  border-radius:18px 18px 0 0;
}
.chat-body{padding:15px;height:180px;overflow-y:auto}
.bot-msg{background:#e6f9ea;padding:12px;border-radius:15px 15px 15px 5px;margin-bottom:8px}
.user-msg{
  background:#22c55e;color:#fff;padding:12px;
  border-radius:15px 15px 5px 15px;margin-bottom:8px;margin-left:auto;
}
.chat-input{display:flex;border-top:1px solid #ddd}
.chat-input input{flex:1;border:none;padding:10px}
.chat-input button{background:#22c55e;border:none;padding:10px;color:white}

@media(max-width:768px){
  .navbar{padding:15px 25px;flex-direction:column;gap:15px}
  .navbar nav{display:flex;flex-wrap:wrap;justify-content:center;gap:15px}
  .navbar nav a{margin:0}
  .analytics-container{padding:25px 15px}
  .charts-grid{grid-template-columns:1fr}
  .export-buttons{flex-direction:column}
  .time-period-selector{flex-wrap:wrap}
}
</style>
</head>
<body>
<canvas id="earth"></canvas>
<div class="overlay"></div>

<header class="navbar">
  <h1>SwachhTrack</h1>
  <nav>
    <a href="{% url 'index' %}">Home</a>
    <a href="{% url 'dashboard' %}">Dashboard</a>
    <a href="{% url 'map' %}">Map</a>
    <a href="{% url 'report' %}">Report</a>
    <a href="{% url 'analytics' %}" class="active">Analytics</a>
    <a href="{% url 'about' %}">About</a>
    <a href="{% url 'contact' %}">Contact</a>
  </nav>
</header>

<main class="analytics-container">
  <div class="analytics-header">
    <h2><i class="fas fa-chart-line"></i> Environmental Analytics</h2>
    <p>Data-driven insights into pollution patterns, community impact, and environmental trends in your area.</p>
  </div>

  <div class="time-period-selector">
    <button class="time-btn active">Last 7 Days</button>
    <button class="time-btn">Last 30 Days</button>
    <button class="time-btn">Last 3 Months</button>
    <button class="time-btn">Last Year</button>
    <button class="time-btn">All Time</button>
  </div>

  <div class="stats-overview">
    <div class="stat-card-large">
      <div class="stat-value">1,247</div>
      <div class="stat-label">Total Reports</div>
      <div class="trend-indicator trend-up">
        <i class="fas fa-arrow-up"></i> 12% from last month
      </div>
    </div>
    <div class="stat-card-large">
      <div class="stat-value">78%</div>
      <div class="stat-label">Issues Resolved</div>
      <div class="trend-indicator trend-up">
        <i class="fas fa-arrow-up"></i> 8% improvement
      </div>
    </div>
    <div class="stat-card-large">
      <div class="stat-value">2.4h</div>
      <div class="stat-label">Avg Response Time</div>
      <div class="trend-indicator trend-down">
        <i class="fas fa-arrow-down"></i> 30min faster
      </div>
    </div>
    <div class="stat-card-large">
      <div class="stat-value">156</div>
      <div class="stat-label">Active Volunteers</div>
      <div class="trend-indicator trend-up">
        <i class="fas fa-arrow-up"></i> 24 new this month
      </div>
    </div>
  </div>

  <div class="charts-grid">
    <div class="chart-container">
      <div class="chart-header">
        <h3>Pollution Types Distribution</h3>
        <span style="color:#c8facc;font-size:0.9rem">This Month</span>
      </div>
      <div class="chart-wrapper">
        <canvas id="pollutionChart"></canvas>
      </div>
    </div>

    <div class="chart-container">
      <div class="chart-header">
        <h3>Report Trends Over Time</h3>
        <span style="color:#c8facc;font-size:0.9rem">Last 30 Days</span>
      </div>
      <div class="chart-wrapper">
        <canvas id="trendsChart"></canvas>
      </div>
    </div>

    <div class="chart-container">
      <div class="chart-header">
        <h3>Severity Levels</h3>
        <span style="color:#c8facc;font-size:0.9rem">Current Month</span>
      </div>
      <div class="chart-wrapper">
        <canvas id="severityChart"></canvas>
      </div>
    </div>

    <div class="chart-container">
      <div class="chart-header">
        <h3>Area Comparison</h3>
        <span style="color:#c8facc;font-size:0.9rem">Environmental Score</span>
      </div>
      <div class="chart-wrapper">
        <canvas id="areaChart"></canvas>
      </div>
    </div>
  </div>

  <div class="insights-section">
    <div class="insights-header">
      <h3><i class="fas fa-lightbulb"></i> AI-Generated Insights</h3>
      <span style="color:#7ae582;font-size:0.9rem">Updated Today</span>
    </div>
    <div class="insights-grid">
      <div class="insight-card">
        <h4>üìà Positive Trend</h4>
        <p>Air quality has improved by 15% in the industrial zone due to increased monitoring and community reporting.</p>
      </div>
      <div class="insight-card">
        <h4>‚ö†Ô∏è Area of Concern</h4>
        <p>River pollution incidents increased by 25% this month. Focus needed on upstream industrial areas.</p>
      </div>
      <div class="insight-card">
        <h4>üë• Community Impact</h4>
        <p>Your area's reporting rate is 40% higher than city average. This correlates with faster resolution times.</p>
      </div>
      <div class="insight-card">
        <h4>üåø Success Story</h4>
        <p>The "Green Valley" cleanup initiative removed 2.5 tons of waste, improving local biodiversity by 18%.</p>
      </div>
    </div>
  </div>

  <div class="leaderboard-section">
    <div class="leaderboard-header">
      <h3><i class="fas fa-trophy"></i> Top Contributors</h3>
      <span style="color:#c8facc;font-size:0.9rem">This Month</span>
    </div>
    <table class="leaderboard-table">
      <thead>
        <tr>
          <th class="rank-cell">Rank</th>
          <th>Contributor</th>
          <th>Reports</th>
          <th>Points</th>
          <th>Impact Score</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="rank-cell rank-1">1</td>
          <td><strong>GreenWarrior</strong><br><span style="color:#c8facc;font-size:0.8rem">Downtown</span></td>
          <td class="points-cell">42</td>
          <td class="points-cell">1,580</td>
          <td class="points-cell">94</td>
        </tr>
        <tr>
          <td class="rank-cell rank-2">2</td>
          <td><strong>EcoChampion</strong><br><span style="color:#c8facc;font-size:0.8rem">Riverside</span></td>
          <td class="points-cell">38</td>
          <td class="points-cell">1,420</td>
          <td class="points-cell">89</td>
        </tr>
        <tr>
          <td class="rank-cell rank-3">3</td>
          <td><strong>EarthGuardian</strong><br><span style="color:#c8facc;font-size:0.8rem">Green Valley</span></td>
          <td class="points-cell">35</td>
          <td class="points-cell">1,320</td>
          <td class="points-cell">86</td>
        </tr>
        <tr>
          <td class="rank-cell">4</td>
          <td><strong>CleanAirAdvocate</strong><br><span style="color:#c8facc;font-size:0.8rem">Industrial Zone</span></td>
          <td class="points-cell">31</td>
          <td class="points-cell">1,180</td>
          <td class="points-cell">82</td>
        </tr>
        <tr>
          <td class="rank-cell">5</td>
          <td><strong>WaterProtector</strong><br><span style="color:#c8facc;font-size:0.8rem">Lakeside</span></td>
          <td class="points-cell">28</td>
          <td class="points-cell">1,050</td>
          <td class="points-cell">78</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="comparison-cards">
    <div class="comparison-card">
      <h3><i class="fas fa-balance-scale"></i> Monthly Comparison</h3>
      <div class="comparison-item">
        <span class="comparison-label">Total Reports</span>
        <span class="comparison-value">+12%</span>
      </div>
      <div class="comparison-item">
        <span class="comparison-label">Resolution Rate</span>
        <span class="comparison-value">+8%</span>
      </div>
      <div class="comparison-item">
        <span class="comparison-label">Avg Response Time</span>
        <span class="comparison-value">-30min</span>
      </div>
      <div class="comparison-item">
        <span class="comparison-label">Community Growth</span>
        <span class="comparison-value">+18%</span>
      </div>
    </div>

    <div class="comparison-card">
      <h3><i class="fas fa-map-marked-alt"></i> Area Performance</h3>
      <div class="comparison-item">
        <span class="comparison-label">Your Area Score</span>
        <span class="comparison-value">78/100</span>
      </div>
      <div class="comparison-item">
        <span class="comparison-label">City Average</span>
        <span class="comparison-value">65/100</span>
      </div>
      <div class="comparison-item">
        <span class="comparison-label">Top Area</span>
        <span class="comparison-value">Green Valley (84)</span>
      </div>
      <div class="comparison-item">
        <span class="comparison-label">Your Rank</span>
        <span class="comparison-value">#3/12 areas</span>
      </div>
    </div>
  </div>

  <div class="export-section">
    <h3 style="color:#7ae582;margin-bottom:15px">Export Analytics Data</h3>
    <p style="color:#c8facc;margin-bottom:20px">Download detailed reports and data for your records or presentations</p>
    <div class="export-buttons">
      <button class="export-btn">
        <i class="fas fa-file-pdf"></i> PDF Report
      </button>
      <button class="export-btn">
        <i class="fas fa-file-csv"></i> CSV Data
      </button>
      <button class="export-btn">
        <i class="fas fa-chart-bar"></i> Charts Only
      </button>
    </div>
  </div>
</main>

<div class="spline-float">
  <spline-viewer url="https://prod.spline.design/UQEVAplfqnBX3NcV/scene.splinecode"></spline-viewer>
</div>
<script type="module" src="https://unpkg.com/@splinetool/viewer@1.12.36/build/spline-viewer.js"></script>

<div class="chatbot" id="chatbot">
  <div class="chat-header">üìä Analytics Assistant <span onclick="toggleChat()">‚úñ</span></div>
  <div class="chat-body" id="chat-body">
    <div class="bot-msg">Ask me anything about the analytics! I can explain trends, patterns, or help you interpret the data.</div>
  </div>
  <div class="chat-input">
    <input id="user-input" placeholder="Ask about analytics...">
    <button onclick="sendMessage()">Send</button>
  </div>
</div>

<script>
// Initialize Charts
document.addEventListener('DOMContentLoaded', function() {
  const ctx1 = document.getElementById('pollutionChart').getContext('2d');
  const pollutionChart = new Chart(ctx1, {
    type: 'doughnut',
    data: {
      labels: ['Air Pollution', 'Water Pollution', 'Illegal Dumping', 'Noise Pollution', 'Other'],
      datasets: [{
        data: [35, 28, 22, 10, 5],
        backgroundColor: ['#22c55e', '#2196f3', '#795548', '#9c27b0', '#ffc107'],
        borderWidth: 2,
        borderColor: '#000'
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: { position: 'bottom', labels: { color: '#eaffea' } }
      }
    }
  });

  const ctx2 = document.getElementById('trendsChart').getContext('2d');
  const trendsChart = new Chart(ctx2, {
    type: 'line',
    data: {
      labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
      datasets: [
        {
          label: 'Air Pollution',
          data: [12, 19, 8, 15],
          borderColor: '#22c55e',
          backgroundColor: 'rgba(34, 197, 94, 0.1)',
          tension: 0.4
        },
        {
          label: 'Water Pollution',
          data: [8, 12, 10, 14],
          borderColor: '#2196f3',
          backgroundColor: 'rgba(33, 150, 243, 0.1)',
          tension: 0.4
        },
        {
          label: 'Illegal Dumping',
          data: [5, 8, 12, 10],
          borderColor: '#795548',
          backgroundColor: 'rgba(121, 85, 72, 0.1)',
          tension: 0.4
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        y: { beginAtZero: true, grid: { color: 'rgba(255,255,255,0.1)' }, ticks: { color: '#c8facc' } },
        x: { grid: { color: 'rgba(255,255,255,0.1)' }, ticks: { color: '#c8facc' } }
      },
      plugins: {
        legend: { labels: { color: '#eaffea' } }
      }
    }
  });

  const ctx3 = document.getElementById('severityChart').getContext('2d');
  const severityChart = new Chart(ctx3, {
    type: 'bar',
    data: {
      labels: ['Low', 'Medium', 'High', 'Critical'],
      datasets: [{
        label: 'Reports by Severity',
        data: [45, 32, 18, 5],
        backgroundColor: ['#22c55e', '#ffc107', '#f97316', '#dc3545'],
        borderWidth: 1,
        borderColor: '#fff'
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        y: { beginAtZero: true, grid: { color: 'rgba(255,255,255,0.1)' }, ticks: { color: '#c8facc' } },
        x: { grid: { color: 'rgba(255,255,255,0.1)' }, ticks: { color: '#c8facc' } }
      }
    }
  });

  const ctx4 = document.getElementById('areaChart').getContext('2d');
  const areaChart = new Chart(ctx4, {
    type: 'radar',
    data: {
      labels: ['Air Quality', 'Water Quality', 'Waste Mgmt', 'Green Cover', 'Noise Levels', 'Community Act'],
      datasets: [
        {
          label: 'Your Area',
          data: [78, 72, 85, 82, 75, 88],
          borderColor: '#22c55e',
          backgroundColor: 'rgba(34, 197, 94, 0.2)',
          pointBackgroundColor: '#22c55e'
        },
        {
          label: 'City Average',
          data: [65, 60, 70, 68, 65, 62],
          borderColor: '#2196f3',
          backgroundColor: 'rgba(33, 150, 243, 0.2)',
          pointBackgroundColor: '#2196f3'
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        r: {
          angleLines: { color: 'rgba(255,255,255,0.1)' },
          grid: { color: 'rgba(255,255,255,0.1)' },
          pointLabels: { color: '#c8facc' },
          ticks: { color: '#c8facc', backdropColor: 'transparent' }
        }
      },
      plugins: {
        legend: { labels: { color: '#eaffea' } }
      }
    }
  });

  // Time Period Selector
  document.querySelectorAll('.time-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      document.querySelectorAll('.time-btn').forEach(b => b.classList.remove('active'));
      this.classList.add('active');
      
      // Update charts based on selected time period
      const period = this.textContent;
      console.log(`Loading data for: ${period}`);
      
      // Simulate chart updates
      pollutionChart.data.datasets[0].data = [
        Math.floor(Math.random() * 20) + 30,
        Math.floor(Math.random() * 20) + 25,
        Math.floor(Math.random() * 15) + 15,
        Math.floor(Math.random() * 10) + 5,
        Math.floor(Math.random() * 5) + 3
      ];
      pollutionChart.update();
    });
  });

  // Export buttons
  document.querySelectorAll('.export-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      const type = this.querySelector('i').className.includes('pdf') ? 'PDF' :
                   this.querySelector('i').className.includes('csv') ? 'CSV' : 'Charts';
      alert(`Exporting ${type} report...\nThis would generate and download the file in a real application.`);
    });
  });
});

// Chatbot
function toggleChat(){
  document.getElementById("chatbot").classList.toggle("active");
}
document.querySelector(".spline-float").onclick = toggleChat;

function sendMessage(){
  const input = document.getElementById("user-input");
  const chatBody = document.getElementById("chat-body");
  
  if(input.value.trim()){
    const userMsg = document.createElement("div");
    userMsg.className = "user-msg";
    userMsg.textContent = input.value;
    chatBody.appendChild(userMsg);
    
    setTimeout(() => {
      const botMsg = document.createElement("div");
      botMsg.className = "bot-msg";
      const responses = [
        "Your area shows a 12% increase in reports this month, mostly due to increased community awareness.",
        "The doughnut chart shows air pollution is the most reported issue (35%), followed by water pollution (28%).",
        "Response times have improved by 30 minutes compared to last month - great progress!",
        "Your area ranks #3 out of 12 areas in the city. The leading area is Green Valley with a score of 84/100.",
        "The radar chart shows your area excels in community activism but needs improvement in noise pollution control."
      ];
      botMsg.textContent = responses[Math.floor(Math.random() * responses.length)];
      chatBody.appendChild(botMsg);
      chatBody.scrollTop = chatBody.scrollHeight;
    }, 600);
    
    input.value = "";
    chatBody.scrollTop = chatBody.scrollHeight;
  }
}

// Three.js Earth
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(75, innerWidth/innerHeight, 0.1, 1000);
const renderer = new THREE.WebGLRenderer({
  canvas: document.getElementById("earth"),
  alpha: true,
  antialias: true
});
renderer.setSize(innerWidth, innerHeight);
renderer.setPixelRatio(devicePixelRatio);

const geometry = new THREE.SphereGeometry(2.8, 32, 32);
const texture = new THREE.TextureLoader().load(
  "https://threejs.org/examples/textures/land_ocean_ice_cloud_2048.jpg"
);
const material = new THREE.MeshStandardMaterial({ map: texture });
const globe = new THREE.Mesh(geometry, material);
scene.add(globe);

const light = new THREE.PointLight(0xffffff, 1.5);
light.position.set(5, 5, 5);
scene.add(light);

camera.position.z = 5.2;

function animate() {
  requestAnimationFrame(animate);
  globe.rotation.y += 0.002;
  renderer.render(scene, camera);
}
animate();

addEventListener("resize", () => {
  camera.aspect = innerWidth / innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth, innerHeight);
});
</script>
</body>
</html>