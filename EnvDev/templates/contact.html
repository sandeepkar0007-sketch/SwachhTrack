{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Contact | EcoTracker</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;700&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Montserrat',sans-serif;color:#eaffea;background:#000;overflow-x:hidden}
canvas{position:fixed;inset:0;z-index:-3}
.overlay{position:fixed;inset:0;background:radial-gradient(circle, rgba(0,0,0,0.35), rgba(0,0,0,0.85));z-index:-2}

.navbar{
  position:sticky;top:0;z-index:1000;padding:18px 60px;
  display:flex;justify-content:space-between;align-items:center;
  background:rgba(15,61,46,0.9);backdrop-filter:blur(12px);
}
.navbar h1{color:#eaffea;font-size:1.8rem}
.navbar nav a{
  margin-left:30px;text-decoration:none;color:#c8facc;
  font-weight:500;position:relative;
}
.navbar nav a::after{
  content:"";position:absolute;width:0;height:2px;
  bottom:-6px;left:0;background:#7ae582;transition:.3s;
}
.navbar nav a:hover::after{width:100%}
.navbar nav a.active{color:#7ae582}

/* Contact Layout */
.contact-container{
  max-width:1200px;margin:0 auto;padding:40px 20px;
}
.contact-header{
  text-align:center;margin-bottom:50px;
}
.contact-header h2{
  font-size:2.5rem;color:#7ae582;margin-bottom:15px;
}
.contact-header p{
  font-size:1.1rem;color:#c8facc;max-width:700px;margin:0 auto;
}

/* Contact Grid */
.contact-grid{
  display:grid;grid-template-columns:1fr 1fr;gap:50px;
  margin-bottom:60px;
}

/* Contact Form */
.contact-form{
  background:rgba(255,255,255,0.08);border-radius:25px;
  padding:40px;backdrop-filter:blur(15px);
  border:1px solid rgba(122,229,130,0.1);
}
.contact-form h3{
  color:#7ae582;margin-bottom:30px;font-size:1.5rem;
}
.form-group{
  margin-bottom:25px;
}
.form-group label{
  display:block;margin-bottom:8px;color:#c8facc;
  font-weight:500;
}
.form-group input,
.form-group select,
.form-group textarea{
  width:100%;padding:15px;background:rgba(255,255,255,0.1);
  border:1px solid rgba(122,229,130,0.3);border-radius:12px;
  color:#fff;font-family:inherit;font-size:1rem;
  transition:.3s;
}
.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus{
  outline:none;border-color:#22c55e;
  box-shadow:0 0 0 3px rgba(34,197,94,0.2);
}
.form-group textarea{
  min-height:150px;resize:vertical;
}
.submit-btn{
  background:#22c55e;color:#022c22;border:none;
  padding:16px 40px;border-radius:15px;font-size:1.1rem;
  font-weight:600;cursor:pointer;transition:.3s;
  width:100%;display:flex;align-items:center;
  justify-content:center;gap:10px;
}
.submit-btn:hover{
  background:#16a34a;transform:translateY(-3px);
  box-shadow:0 10px 25px rgba(34,197,94,0.3);
}

/* Contact Info */
.contact-info{
  display:flex;flex-direction:column;gap:30px;
}
.info-card{
  background:rgba(255,255,255,0.08);border-radius:20px;
  padding:30px;backdrop-filter:blur(15px);
  border:1px solid rgba(122,229,130,0.1);
}
.info-card h3{
  color:#7ae582;margin-bottom:20px;font-size:1.3rem;
  display:flex;align-items:center;gap:10px;
}
.info-item{
  display:flex;align-items:flex-start;gap:15px;
  margin-bottom:20px;
}
.info-icon{
  width:40px;height:40px;background:rgba(34,197,94,0.2);
  border-radius:50%;display:flex;align-items:center;
  justify-content:center;color:#7ae582;font-size:1.2rem;
  flex-shrink:0;
}
.info-content h4{color:#eaffea;margin-bottom:5px}
.info-content p{color:#c8facc;font-size:0.95rem}

/* Social Links */
.social-links{
  display:flex;gap:15px;margin-top:20px;
}
.social-link{
  width:45px;height:45px;background:rgba(255,255,255,0.1);
  border-radius:50%;display:flex;align-items:center;
  justify-content:center;color:#7ae582;font-size:1.2rem;
  transition:.3s;text-decoration:none;
}
.social-link:hover{
  background:#22c55e;color:#022c22;transform:translateY(-3px);
}

/* Map Container */
.map-container{
  margin-top:20px;border-radius:15px;overflow:hidden;
  height:250px;background:#1a1a1a;display:flex;
  align-items:center;justify-content:center;
}
.map-placeholder{
  text-align:center;
}
.map-placeholder i{font-size:3rem;color:#7ae582;margin-bottom:15px}

/* FAQ Section */
.faq-section{
  background:rgba(255,255,255,0.08);border-radius:25px;
  padding:40px;margin-bottom:50px;backdrop-filter:blur(15px);
  border:1px solid rgba(122,229,130,0.1);
}
.faq-header{
  text-align:center;margin-bottom:40px;
}
.faq-header h3{
  color:#7ae582;font-size:1.8rem;margin-bottom:15px;
}
.faq-grid{
  display:grid;grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));
  gap:25px;
}
.faq-item{
  background:rgba(255,255,255,0.05);border-radius:15px;
  padding:25px;border-left:4px solid #22c55e;
}
.faq-item h4{
  color:#7ae582;margin-bottom:15px;font-size:1.1rem;
}
.faq-item p{color:#c8facc;font-size:0.95rem}

/* Success Message */
.success-message{
  display:none;background:rgba(34,197,94,0.15);
  border:1px solid #22c55e;border-radius:15px;
  padding:30px;text-align:center;margin-top:30px;
}
.success-icon{font-size:4rem;color:#22c55e;margin-bottom:20px}
.success-message h3{color:#7ae582;margin-bottom:15px}

/* Spline & Chatbot */
.spline-float{
  position:fixed;bottom:18px;right:18px;width:130px;height:130px;
  z-index:999;cursor:pointer;
}
.chatbot{
  position:fixed;bottom:210px;right:20px;width:280px;
  background:#fff;border-radius:18px;box-shadow:0 20px 50px rgba(0,0,0,.4);
  transform:scale(0);opacity:0;transition:.4s;z-index:998;
}
.chatbot.active{transform:scale(1);opacity:1}
.chat-header{
  background:#0f3d2e;color:#eaffea;padding:14px;
  display:flex;justify-content:space-between;
  border-radius:18px 18px 0 0;
}
.chat-body{padding:15px;height:180px;overflow-y:auto}
.bot-msg{background:#e6f9ea;padding:12px;border-radius:15px 15px 15px 5px;margin-bottom:8px}
.user-msg{
  background:#22c55e;color:#fff;padding:12px;
  border-radius:15px 15px 5px 15px;margin-bottom:8px;margin-left:auto;
}
.chat-input{display:flex;border-top:1px solid #ddd}
.chat-input input{flex:1;border:none;padding:10px}
.chat-input button{background:#22c55e;border:none;padding:10px;color:white}

@media(max-width:992px){
  .contact-grid{grid-template-columns:1fr}
  .navbar{padding:15px 25px;flex-direction:column;gap:15px}
  .navbar nav{display:flex;flex-wrap:wrap;justify-content:center;gap:15px}
  .navbar nav a{margin:0}
  .contact-container{padding:25px 15px}
}
</style>
</head>
<body>
<canvas id="earth"></canvas>
<div class="overlay"></div>

<header class="navbar">
  <h1>SwachhTrack</h1>
  <nav>
    <a href="{% url 'index' %}">Home</a>
    <a href="{% url 'dashboard' %}">Dashboard</a>
    <a href="{% url 'map' %}">Map</a>
    <a href="{% url 'report' %}">Report</a>
    <a href="{% url 'analytics' %}">Analytics</a>
    <a href="{% url 'about' %}">About</a>
    <a href="{% url 'contact' %}" class="active">Contact</a>
  </nav>
</header>

<main class="contact-container">
  <div class="contact-header">
    <h2><i class="fas fa-envelope"></i> Get In Touch</h2>
    <p>Have questions, suggestions, or want to collaborate? We'd love to hear from you. Reach out and let's build a greener future together.</p>
  </div>

  <div class="contact-grid">
    <div class="contact-form">
      <h3><i class="fas fa-paper-plane"></i> Send Us a Message</h3>
      <form id="contactForm" method="POST">
          {% csrf_token %}

        <div class="form-group">
          <label for="name">Full Name</label>
          <input type="text" id="name" placeholder="Your name" required>
        </div>
        
        <div class="form-group">
          <label for="email">Email Address</label>
          <input type="email" id="email" placeholder="you@example.com" required>
        </div>
        
        <div class="form-group">
          <label for="subject">Subject</label>
          <select id="subject" required>
            <option value="" disabled selected>Select a topic</option>
            <option value="report">Report an Issue</option>
            <option value="partnership">Partnership Inquiry</option>
            <option value="volunteer">Volunteer Opportunity</option>
            <option value="technical">Technical Support</option>
            <option value="other">Other</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="message">Your Message</label>
          <textarea id="message" placeholder="How can we help you?" required></textarea>
        </div>
        
        <button type="submit" class="submit-btn">
          <i class="fas fa-paper-plane"></i> Send Message
        </button>
      </form>
      
      <div class="success-message" id="successMessage">
        <div class="success-icon">âœ…</div>
        <h3>Message Sent Successfully!</h3>
        <p>Thank you for contacting EcoTracker. We'll get back to you within 24-48 hours.</p>
        <p style="color:#c8facc;font-size:0.9rem;margin-top:15px">Reference ID: #CT2025-8921</p>
      </div>
    </div>

    <div class="contact-info">
      <div class="info-card">
        <h3><i class="fas fa-map-marker-alt"></i> Our Office</h3>
        <div class="info-item">
          <div class="info-icon">
            <i class="fas fa-building"></i>
          </div>
          <div class="info-content">
            <h4>Headquarters</h4>
            <p>123 Green Street, Eco City<br>Environmental District, EC 10001</p>
          </div>
        </div>
        
        <div class="info-item">
          <div class="info-icon">
            <i class="fas fa-phone"></i>
          </div>
          <div class="info-content">
            <h4>Phone Numbers</h4>
            <p>General Inquiries: +1 (555) 123-4567<br>Emergency Reports: +1 (555) 987-6543</p>
          </div>
        </div>
        
        <div class="info-item">
          <div class="info-icon">
            <i class="fas fa-envelope"></i>
          </div>
          <div class="info-content">
            <h4>Email Addresses</h4>
            <p>General: contact@ecotracker.org<br>Support: help@ecotracker.org<br>Partnerships: partners@ecotracker.org</p>
          </div>
        </div>
        
        <div class="social-links">
          <a href="#" class="social-link">
            <i class="fab fa-twitter"></i>
          </a>
          <a href="#" class="social-link">
            <i class="fab fa-facebook-f"></i>
          </a>
          <a href="#" class="social-link">
            <i class="fab fa-linkedin-in"></i>
          </a>
          <a href="#" class="social-link">
            <i class="fab fa-instagram"></i>
          </a>
          <a href="#" class="social-link">
            <i class="fab fa-youtube"></i>
          </a>
        </div>
      </div>

      <div class="info-card">
        <h3><i class="fas fa-clock"></i> Office Hours</h3>
        <div class="info-item">
          <div class="info-icon">
            <i class="fas fa-calendar-alt"></i>
          </div>
          <div class="info-content">
            <h4>Regular Hours</h4>
            <p>Monday - Friday: 9:00 AM - 6:00 PM<br>Saturday: 10:00 AM - 4:00 PM<br>Sunday: Closed</p>
          </div>
        </div>
        
        <div class="info-item">
          <div class="info-icon">
            <i class="fas fa-exclamation-circle"></i>
          </div>
          <div class="info-content">
            <h4>Emergency Reports</h4>
            <p>24/7 support for critical environmental incidents via our mobile app or emergency hotline.</p>
          </div>
        </div>
        
        <div class="map-container">
          <div class="map-placeholder">
            <i class="fas fa-map-marked-alt"></i>
            <p style="color:#c8facc">Interactive Map Here</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="faq-section">
    <div class="faq-header">
      <h3><i class="fas fa-question-circle"></i> Frequently Asked Questions</h3>
      <p style="color:#c8facc">Quick answers to common questions</p>
    </div>
    <div class="faq-grid">
      <div class="faq-item">
        <h4>How quickly do you respond to pollution reports?</h4>
        <p>We aim to verify and map reports within 2 hours for critical issues, and within 24 hours for non-critical reports. Response time depends on severity and location.</p>
      </div>
      <div class="faq-item">
        <h4>Can I report anonymously?</h4>
        <p>Yes! You can submit reports without providing personal information. However, providing contact details helps us follow up on resolution.</p>
      </div>
      <div class="faq-item">
        <h4>Do you work with local authorities?</h4>
        <p>We partner with municipal environmental departments, police, and other agencies to ensure reported issues get appropriate attention and action.</p>
      </div>
      <div class="faq-item">
        <h4>How can my organization partner with EcoTracker?</h4>
        <p>We welcome partnerships with NGOs, educational institutions, and businesses. Email partners@ecotracker.org with details about your organization.</p>
      </div>
      <div class="faq-item">
        <h4>Is there a mobile app available?</h4>
        <p>Yes! Our mobile app is available on both iOS and Android. Search for "EcoTracker" in your app store.</p>
      </div>
      <div class="faq-item">
        <h4>How is my data protected?</h4>
        <p>We follow strict data protection protocols. Personal information is never shared without consent, and location data is anonymized on public maps.</p>
      </div>
    </div>
  </div>
</main>

<div class="spline-float">
  <spline-viewer url="https://prod.spline.design/UQEVAplfqnBX3NcV/scene.splinecode"></spline-viewer>
</div>
<script type="module" src="https://unpkg.com/@splinetool/viewer@1.12.36/build/spline-viewer.js"></script>

<div class="chatbot" id="chatbot">
  <div class="chat-header">ðŸ“ž Contact Assistant <span onclick="toggleChat()">âœ–</span></div>
  <div class="chat-body" id="chat-body">
    <div class="bot-msg">Hello! I can help answer your questions about contacting our team or direct you to the right department.</div>
  </div>
  <div class="chat-input">
    <input id="user-input" placeholder="Ask about contacting us...">
    <button onclick="sendMessage()">Send</button>
  </div>
</div>

<script>
// Contact Form Submission
document.getElementById('contactForm').addEventListener('submit', function(e) {
  e.preventDefault();
  
  // Show success message
  document.getElementById('successMessage').style.display = 'block';
  this.style.display = 'none';
  
  // Scroll to success message
  document.getElementById('successMessage').scrollIntoView({ behavior: 'smooth' });
});

// Chatbot
function toggleChat(){
  document.getElementById("chatbot").classList.toggle("active");
}
document.querySelector(".spline-float").onclick = toggleChat;

function sendMessage(){
  const input = document.getElementById("user-input");
  const chatBody = document.getElementById("chat-body");
  
  if(input.value.trim()){
    const userMsg = document.createElement("div");
    userMsg.className = "user-msg";
    userMsg.textContent = input.value;
    chatBody.appendChild(userMsg);
    
    setTimeout(() => {
      const botMsg = document.createElement("div");
      botMsg.className = "bot-msg";
      const responses = [
        "Our office hours are Monday-Friday 9AM-6PM. Emergency reports are handled 24/7 through our hotline.",
        "For partnership inquiries, please email partners@ecotracker.org with details about your organization.",
        "Technical support typically responds within 2-4 hours during business days. Include screenshots if possible!",
        "Yes, you can volunteer with us! Visit our 'Get Involved' section or email volunteer@ecotracker.org.",
        "We have offices in 12 cities globally. Check our 'Locations' page for the nearest office to you."
      ];
      botMsg.textContent = responses[Math.floor(Math.random() * responses.length)];
      chatBody.appendChild(botMsg);
      chatBody.scrollTop = chatBody.scrollHeight;
    }, 600);
    
    input.value = "";
    chatBody.scrollTop = chatBody.scrollHeight;
  }
}

// Three.js Earth
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(75, innerWidth/innerHeight, 0.1, 1000);
const renderer = new THREE.WebGLRenderer({
  canvas: document.getElementById("earth"),
  alpha: true,
  antialias: true
});
renderer.setSize(innerWidth, innerHeight);
renderer.setPixelRatio(devicePixelRatio);

const geometry = new THREE.SphereGeometry(2.8, 32, 32);
const texture = new THREE.TextureLoader().load(
  "https://threejs.org/examples/textures/land_ocean_ice_cloud_2048.jpg"
);
const material = new THREE.MeshStandardMaterial({ map: texture });
const globe = new THREE.Mesh(geometry, material);
scene.add(globe);

const light = new THREE.PointLight(0xffffff, 1.5);
light.position.set(5, 5, 5);
scene.add(light);

camera.position.z = 5.2;

function animate() {
  requestAnimationFrame(animate);
  globe.rotation.y += 0.002;
  renderer.render(scene, camera);
}
animate();

addEventListener("resize", () => {
  camera.aspect = innerWidth / innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth, innerHeight);
});
</script>
</body>
</html>